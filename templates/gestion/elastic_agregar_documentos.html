<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Documentos - Elasticsearch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/temaindext.css') }}" rel="stylesheet">
</head>
<body>
<div class="landing-page">
    <header>
      <div class="container">
        <a href="#" class="logo">Big <b>Data</b></a>
        <ul class="links">
          <li class="nav-item"><a class="nav-link" href="/gestion_proyecto" active><b>Gestionar Mongo Db</b></a></li>
          <li class="nav-item"><a class="nav-link" href="/elasticAdmin">Gestionar Elastic</a></li>
          <li class="nav-item"><a class="nav-link" href="/">Salir</a></li>
        </ul>
      </div>
    </header>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h3 class="card-title mb-0">Agregar Documentos al Índice: {{ index_name }}</h3>
                            <a href="{{ url_for('elasticAdmin') }}" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Volver
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <form id="uploadForm" method="POST" action="{{ url_for('elastic_agregar_documentos') }}" enctype="multipart/form-data">
                            <div class="mb-3">
                                <label for="zipFile" class="form-label">Archivo ZIP con documentos JSON</label>
                                <input type="file" class="form-control" id="zipFile" name="zipFile" accept=".zip" required>
                                <div class="form-text">Seleccione un archivo ZIP que contenga documentos JSON para indexar.</div>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary" id="submitBtn">
                                    <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                                    Indexar Documentos
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de éxito -->
    {% if success_message %}
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title" id="successModalLabel">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-check-circle me-2" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-2.354a.5.5 0 0 0-.708-.708L7.5 8.793 6.354 7.647a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                <path d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14z"/>
              </svg>
              Documentos indexados
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            {{ success_message }}
          </div>
        </div>
      </div>
    </div>
    <script>
      window.onload = function() {
        var modal = new bootstrap.Modal(document.getElementById('successModal'));
        modal.show();
        setTimeout(function(){ modal.hide(); }, 4000);
      }
    </script>
    {% endif %}

    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#uploadForm').on('submit', function() {
                const submitBtn = $('#submitBtn');
                const spinner = submitBtn.find('.spinner-border');
                
                submitBtn.prop('disabled', true);
                spinner.removeClass('d-none');
            });
        });
    </script>
</div>
<div class="main"></div>
<div class="footer">
  <div class="bubbles">
    <!-- ...tu código de las burbujas sigue igual... -->
  </div>
  <div class="content">
    <div>
      <div><b>Creado Por: </b><a href="#">David Mateo Morales Romero</a></br>
        <b>Maestria en Analitica de Datos </b><a href="mailto:dmoralesr1@ucentral.edu.co"></br>
          <b>Correo: dmoralesr1@ucentral.edu.co</b></br>
      </div>
    </div>
    <div><a class="image" href="https://www.ucentral.edu.co/" target="_blank" style="background-image: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/199011/happy.svg')"></a>
      <p>Versión 2.0 del 1 de Diciembre de 2025 </p>
    </div>
  </div>
</div>

<svg style="position: fixed; top: 100vh; display: none;">
  <defs>
    <filter id="blob">
      <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur>
      <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="blob"></feColorMatrix>
    </filter>
  </defs>
</svg>
</body>
</html>
